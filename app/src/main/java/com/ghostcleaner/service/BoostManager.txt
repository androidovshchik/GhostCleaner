package com.ghostcleaner.service

import android.app.ActivityManager
import android.content.Context
import android.content.pm.ApplicationInfo
import org.jetbrains.anko.activityManager
import java.util.*
import java.util.concurrent.TimeUnit

class BoostManager(context: Context) {

    private val packageManager = context.packageManager

    private val activityManager = context.activityManager

    fun a(): Long {
        val j: Long = this.f4466b
        if (j > 0) {
            return j
        }
        val memoryInfo = ActivityManager.MemoryInfo()
        activityManager.getMemoryInfo(memoryInfo)
        this.f4466b = (memoryInfo.totalMem - memoryInfo.availMem) / 1024
        return this.f4466b
    }

    fun b(): Long {
        val memoryInfo = ActivityManager.MemoryInfo()
        activityManager.getMemoryInfo(memoryInfo)
        return memoryInfo.totalMem / PlaybackStateCompat.ACTION_SET_CAPTIONING_ENABLED
    }

    fun c(): Int {
        val installedApplications: List<ApplicationInfo> = packageManager.getInstalledApplications(0)
        val packageName: String = this.f4465a.getApplicationContext().getPackageName()
        for (next in installedApplications) {
            if (next.flags and 1 != 1 && next.packageName != packageName) {
                activityManager.killBackgroundProcesses(next.packageName)
            }
        }
        return a3
    }
}